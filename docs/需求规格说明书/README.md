# 需求规格说明书

## 文档信息

| 文档版本 | 修订日期   | 修订人 | 修订描述 |
| -------- | ---------- | ------ | -------- |
| v0.1     | YYYY-MM-DD | 待定   | 初稿     |


## 1. 引言

### 1.1 编写目的

本文档旨在详细描述飞机发动机QEC拆装智能化系统二期建设的需求规格，为系统设计、开发和测试提供依据。文档的预期读者包括项目管理人员、系统分析师、开发人员、测试人员以及相关业务部门负责人。

### 1.2 项目背景

本项目是在一期完成了飞机发动机QEC拆装的信息化系统建设基础上，进一步提升系统智能化水平的二期建设工作。一期建设主要实现了QEC拆装流程的信息化，而二期建设将引入人工智能技术，提高维修效率、优化资源配置，实现维修工作的智能化管理。

### 1.3 定义和缩略语

| 术语/缩略语 | 定义                                                                                |
| ----------- | ----------------------------------------------------------------------------------- |
| QEC         | Quick Engine Change，快速发动机更换装置                                             |
| OEC         | On-wing Engine Change，机翼发动机更换                                               |
| SAP         | Systems Applications and Products，企业资源计划系统                                 |
| EO/EB/SB    | Engineering Order/Engineering Bulletin/Service Bulletin，工程指令/工程通告/服务通告 |
| AI          | Artificial Intelligence，人工智能                                                   |

### 1.4 参考资料

1. 飞机发动机QEC拆装业务流程文档
2. 机务维修AI辅助系统功能结构规划
3. 一期系统建设技术文档
4. 航空维修行业相关标准和规范

## 2. 系统概述

### 2.1 系统目标

1. 建立完善的维修知识库，实现维修知识的智能检索和问答
2. 提供智能化的维修计划生成和调整功能，优化资源配置
3. 实现航材、人员和工具的智能化管理
4. 提供直观的生产看板，实时展示计划、进度和资源状态
5. 辅助发动机检测，提高检测效率和准确性

### 2.2 系统范围

本系统覆盖飞机发动机QEC拆装的全流程，包括准备阶段和实施阶段。具体包括：
1. 维修知识管理与智能问答
2. 维修计划智能生成与调整
3. 资源(航材、人员、工具)智能管理
4. 生产状态可视化展示
5. 发动机检测辅助功能

系统不包括SAP系统的内部功能和物流运输环节。

### 2.3 系统用户

1. 维修控制人员(总控/线控)：负责维修指令评估、任务配置和计划编制
2. 技术管理人员：负责技术资料管理和技术支持
3. 项目管理人员：负责项目生产准备和协调
4. 维修执行人员：执行具体维修任务
5. 质量检验人员：负责维修质量验收
6. 航材管理人员：负责航材保障
7. 系统管理员：负责系统维护和管理

### 2.4 系统环境

1. 硬件环境：
   - 服务器：支持大规模数据处理和AI模型运行的高性能服务器
   - 终端设备：PC、平板、移动设备

2. 软件环境：
   - 操作系统：支持Windows/Linux/iOS/Android
   - 数据库：关系型数据库与非关系型数据库结合
   - 中间件：消息队列、缓存系统
   - AI框架：支持自然语言处理和知识图谱的框架

3. 网络环境：
   - 互联网

4. 安全环境：
   - 符合企业信息安全要求
   - 支持多级权限控制和审计


## 3. 功能需求

### 3.1 功能概述

机务维修AI辅助系统旨在通过人工智能技术提升飞机发动机QEC拆装过程的智能化水平，主要包括四大功能模块：维修知识库管理、维修规划及资源智能化、生产看板以及发动机检测辅助。系统将实现知识智能检索、维修计划智能生成与调整、资源智能配置以及多维度的生产状态可视化展示。

### 3.2 功能模块

#### 3.2.1 维修知识库管理

**功能描述**：构建完善的维修知识体系，实现维修知识的智能管理和应用。

**子功能**：
- 维修知识管理
  - 维修手册数据接入与管理
  - 历史维修记录接入与管理
  - 维修经验库管理接入与管理
  - 结构化工程文件接入与管理
  - 维修知识库关键词与数据索引
- 维修知识问答
  - 自然语言智能问答
  - 维修手册检索与定位

##### 3.2.1.1 维修手册数据接入与管理
- 功能编号：F-RMANUAL-001
- 功能描述：接入并管理设备维修手册，按型号与版本分层维护，确保检索引用到最新且权威的操作指引。示例：上传“X100手册v2.0”，设置型号X100、版本2.0、生效2025-03-01。
- 输入项：
  - 文件：PDF、DOCX、MD、TXT、HTML（单/批）。
  - 元数据（必填）：设备型号、手册版本、生效日期。
  - 元数据（可选）：语言、章节名。
- 输出项：
  - 存入“维修手册知识库”，形成可检索分段与引用来源（文档名、页码/段落）。
- 处理逻辑：
  1. 校验文件格式/大小与必填元数据；
  2. 提取正文与目录；
  3. 规则化分段；
  4. 自动/人工补全元数据；
  5. 进行召回测试与引用核验；
  6. 上线可检索。
- 业务规则：
  - 同型号默认检索“生效中”版本；历史版本保留但默认不参与检索；禁用/归档不参与检索。
- 异常处理：
  - 上传失败可重试；元数据缺失阻断上线并提示；解析失败转人工；入库超限排队并告警。

##### 3.2.1.2 历史维修记录接入与管理
- 功能编号：F-RHIS-001
- 功能描述：统一接入历史工单与维修记录，按工单、设备、时间建立索引，支持依据故障代码与处理结论定位相似案例。示例：导入“2024Q4维修记录.xlsx”，检索“E05风扇故障”定位近三月相似工单。
- 输入项：
  - 文件：CSV、XLSX、JSON（单/批）。
  - 元数据（必填）：工单号、设备型号、维修日期。
  - 元数据（可选）：故障代码、处理结论、维修人员。
- 输出项：
  - 存入“历史维修记录知识库”，分段/条目化展示；引用来源包含工单号与记录时间。
- 处理逻辑：
  1. 字段对齐与结构校验；
  2. 清洗异常与空值；
  3. 分段/条目化；
  4. 批量标注元数据；
  5. 召回测试核验；
  6. 上线可检索。
- 业务规则：
  - 重复工单号拒收；同工单更新以时间近者覆盖；敏感字段按策略脱敏。
- 异常处理：
  - 字段不匹配给出映射建议；重复数据合并/拦截；批量导入失败生成错误清单。

##### 3.2.1.3 维修经验库接入与管理
- 功能编号：F-RKNOW-001
- 功能描述：沉淀一线经验与最佳实践，按适用范围与标签组织，便于快速复用成熟方案。示例：新增“轴承过热处理经验”，标签“振动/润滑”，适用型号“X100/X200”。
- 输入项：
  - 文件：MD、TXT、DOCX、PDF（单/批）。
  - 元数据（必填）：主题、适用型号、最后评审日期。
  - 元数据（可选）：标签（多值）、风险等级、责任人。
- 输出项：
  - 存入“维修经验知识库”；引用显示主题、适用范围与最后评审日期。
- 处理逻辑：
  1. 模板合规检查；
  2. 关键段标注（现象/原因/步骤/验证）；
  3. 标签化与批量编辑；
  4. 召回测试核验；
  5. 上线可检索。
- 业务规则：
  - 超过6个月未评审的经验标记为“需复审”；高风险经验需双人确认后上线。
- 异常处理：
  - 模板缺失提示纠正；标签不在白名单时给出推荐；复审超期自动提醒。

##### 3.2.1.4 结构化工程文件接入与管理
- 功能编号：F-RENG-001
- 功能描述：接入BOM、工艺参数、测试规范等结构化工程文件，支持按部件/版本/生效期检索与引用。示例：上传“BOM_X100_v3.csv”，检索“主板物料替代件”定位差异条目。
- 输入项：
  - 文件：CSV、XLSX、JSON（单/批）。
  - 元数据（必填）：部件号、版本号、生效日期。
  - 元数据（可选）：BOM编号、工艺阶段、供应商。
- 输出项：
  - 存入“结构化工程知识库”；条目级引用显示部件号、版本与差异摘要。
- 处理逻辑：
  1. 字段对齐与校验；
  2. 规格项对比与归并；
  3. 条目化分段；
  4. 元数据批量标注；
  5. 召回测试核验；
  6. 上线可检索。
- 业务规则：
  - 同部件不同版本可并存，默认检索最新有效；变更需记录差异摘要。
- 异常处理：
  - 字段缺失引导映射；差异比对失败输出问题数据包；大批量导入走异步队列。

##### 3.2.1.5 维修知识库关键词与数据索引
- 功能编号：F-KB-INDEX-001
- 功能描述：提供关键词体系与数据索引能力，支持按来源、型号、版本、时间等维度的筛选与引用溯源，提升命中准确率与可解释性。示例：为“E05风扇故障”配置同义词“风机故障/冷却风故障”，检索更稳健。
- 输入项：
  - 关键词词表：核心词、同义词、禁用词；
  - 索引维度：来源类型、设备型号、版本/修订、生效日期、标签等；
  - 验收用例：常见问题清单与期望命中来源。
- 输出项：
  - 建立分段级索引；提供筛选检索与引用来源展示（文档/段落/时间）；输出召回结果与命中说明。
- 处理逻辑：
  1. 制定词表规范与维护流程；
  2. 定义索引维度与元数据映射；
  3. 触发增量/全量重建索引；
  4. 以用例集进行召回核验与调优；
  5. 发布并监测效果。
- 业务规则：
  - 词表变更需评审并记录版本；高频误命中需在一周内修正；索引重建不影响已归档数据。
- 异常处理：
  - 词表冲突给出合并建议；索引构建失败自动回滚上版；召回质量低于阈值时阻断发布并提示。

##### 3.2.1.6 自然语言智能问答
- 功能编号：F-QA-NLU-001
- 功能描述：用户以自然语言提问，系统基于已建立的维修知识库进行检索增强，生成可解释的答案，并附带引用来源与可追溯信息。示例：提问“X100启动失败怎么处理？”返回步骤并标注来源段落。
- 输入项：
  - 输入：问题文本（必填）、可选附件（日志/图片/表格）。
  - 上下文：用户角色、设备型号、时间范围等筛选条件。
- 输出项：
  - 答案文本、关键步骤清单、引用来源（文档/段落/时间/相关度评分）、可选建议与下一步动作。
- 处理逻辑：
  1. 解析问题并识别意图（如：手册定位/经验复用/历史案例）。
  2. 依据关键词与元数据条件检索相应知识库分段（参考段落数上限与最低相关度可配置，仅检索“生效中”版本）。
  3. 汇总与生成结构化输出（答案/引用/置信度/标签）。
  4. 异常兜底与重试（相关度过低、结果为空、超时）。
- 业务规则：
  - 优先采用用户指定型号与版本；未指定时默认最新有效。
  - 引用来源需与答案一并展示；敏感信息按策略脱敏。
- 异常处理：
  - 无匹配：提示补充信息或调整筛选条件。
  - 超时/失败：记录日志并提示稍后重试；可采用备用策略（放宽相关度或改写问题）。

##### 3.2.1.7 维修手册检索与定位
- 功能编号：F-QA-MANUAL-LOCATE-001
- 功能描述：面向“按手册定位”的查询，精准召回与问题最相关的手册段落，提供章节/页码/段落号定位与一键跳转，支持对段落进行二次核验与修订。示例：输入“如何复位燃油控制单元？”返回手册章节3.2.4段，并可跳转查看上下文。
- 输入项：
  - 输入：问题文本；可选限定条件（设备型号、手册版本、章节关键词）。
- 输出项：
  - 定位信息：手册名称、章节/页码/段落、相关度评分；上下文预览；引用跳转链接（指向知识库分段）。
- 处理逻辑：
  1. 识别为“手册定位”意图。
  2. 在“维修手册知识库”中检索并按相关度排序。
  3. 合并上下文段落，展示完整语境。
  4. 输出可追溯引用，并支持从答案跳转至分段详情。
- 业务规则：
  - 默认仅在“生效中”版本检索；可切换历史版本进行比对。
  - 召回不足时可适度放宽相关度，但不超过参考段落数上限。
- 异常处理：
  - 未找到相关章节：提示相近章节与关键词建议。
  - 版本缺失：允许选择其他有效版本或提交补齐请求。

##### 3.2.1.8 外部知识库接入与管理
- 功能编号：F-EXTKB-001
- 功能描述：连接外部知识库作为补充来源，在不搬运内容的前提下召回与问题最相关的分段，并展示来源，统一与内部知识一起使用。
- 输入项：
  - 连接地址（必填）：外部知识系统的检索入口。
  - 访问凭据（必填）：用于验证访问权限。
  - 外部库标识（可选）：限定检索范围。
  - 召回控制（可选）：参考段落数上限、最低相关度分数、元数据筛选条件。
- 输出项：
  - 分段结果：文本、来源标识、相关度分数、定位信息（章节/页码/段落/链接）。
- 处理逻辑：
  1. 校验连接配置与权限；
  2. 调用外部知识检索并标准化为分段结果；
  3. 与内部结果合并去重，按策略排序；
  4. 在“召回测试”中验证并保存参数。
- 业务规则：
  - 外部知识仅用于检索与引用，内容维护由原系统负责；
  - 连接的使用权限可按组织/应用授权；
  - 失败可降级为仅使用内部知识。
- 异常处理：
  - 权限不足：提示检查访问凭据；
  - 超时/配额限制：返回降级结果并记录日志；
  - 返回格式异常：丢弃异常结果并通知修正。
- 示例：输入“燃油泄漏排查”，系统可从外部知识返回相关章节摘要，并标注来源与定位。

##### 3.2.1.9 检索方式与重排策略
- 功能编号：F-RETRIEVE-STRATEGY-001
- 功能描述：提供关键词/语义/混合检索与父子分段上下文合并，通过去冗与优先级规则提升命中质量与可解释性。
- 检索方式：
  - 语义检索：按相似度排序；
  - 关键词检索：按词匹配与权重；
  - 混合检索：并行召回后合并重排；
  - 父子分段：子分段命中后合并父分段上下文。
- 输入项：检索方式、参考段落数上限、最低相关度分数、元数据筛选、重排参数（去重阈值、同文档最多段数）。
- 输出项：排序后的分段列表与引用信息（文档/章节/页码/段落）。
- 处理逻辑：
  1. 并行召回内部与外部候选；
  2. 合并父子分段上下文；
  3. 去冗与优先级重排；
  4. 生成最终列表与引用信息。
- 业务规则：
  - 支持知识库级默认与应用级覆盖；
  - 默认开启父子分段上下文合并；
  - 未达质量门槛（最低相关度/同源覆盖）不得发布。
- 异常处理：
  - 召回过少：适度放宽阈值或提示补充信息；
  - 召回过多：提高阈值或限制同源段比例；
  - 重排失败：回退至初始排序并记录日志。
- 示例：输入“E05风扇故障”，系统输出不超过8段高相关内容，并自动合并上级段落以补全上下文。

##### 3.2.1.10 检索质量监控与治理
- 功能编号：F-KB-QA-GOV-001
- 功能描述：提供召回测试台、用例集验证、指标看板与发布门槛，支持版本化与回滚，确保检索质量稳定可控。
- 指标体系：
  - 命中率、平均相关度、引用点击率、用户反馈；
  - 首字节/总时延、超时率、外部连接可用率；
  - A/B 对比增益与发布门槛。
- 处理逻辑：
  1. 采集应用内检索与引用行为；
  2. 维护典型问题用例集；
  3. 在“召回测试”中对比参数与策略；
  4. 未达门槛阻断发布并要求修订；
  5. 版本留痕，支持一键回滚。
- 异常处理：
  - 指标异常波动：自动告警并标注变更点；
  - 数据延迟/缺失：标记报告无结论并补采。
- 示例：每周以10条常见问题评测两组策略，若命中率提升≥10%且时延≤3秒，则替换为新策略。

#### 3.2.2 维修规划及资源智能化

**功能描述**：通过AI技术智能化生成和调整维修计划，优化航材、人员和工具等资源配置。

**子功能**：
- 维修计划智能化生成
  - 维修需求接收
  - 计划自动生成
  - 计划流程管理
- 维修计划智能化调整
  - 工作协同冲突解决
- 航材规划智能化
  - 智能化航材储备
  - 短期航材资源保障
- 人员管理智能化
- 工具管理智能化

#### 3.2.3 生产看板

**功能描述**：提供多维度的可视化看板，实时展示计划执行、生产进度和资源状态。

**子功能**：
- 计划看板
  - 近期计划
  - 中期计划
  - 长期计划
- 进度看板
- 资源看板
- 工位看板

#### 3.2.4 发动机检测辅助

**功能描述**：通过AI技术辅助发动机检测，提高检测效率和准确性。

**子功能**：
- 智能检测任务管理
  - 新增检测任务
  - 检测路径规划
- 实时检测结果
- 报告生成
- 历史数据分析
- 预警管理

### 3.3 核心功能与优先级

| 功能模块             | 核心功能点                 | 优先级 |
| -------------------- | -------------------------- | ------ |
| 维修知识库管理       | 维修知识库关键词与数据索引 | 高     |
|                      | 自然语言智能问答           | 高     |
|                      | 维修手册检索与定位         | 高     |
| 维修规划及资源智能化 | 维修需求接收               | 高     |
|                      | 计划自动生成               | 高     |
|                      | 计划流程管理               | 高     |
|                      | 工作协同冲突解决           | 高     |
|                      | 智能化航材储备             | 高     |
|                      | 短期航材资源保障           | 高     |
|                      | 人员管理智能化             | 高     |
|                      | 工具管理智能化             | 高     |
| 生产看板             | 所有看板功能               | 高     |
| 发动机检测辅助       | 所有检测辅助功能           | 中     |

## 4. 非功能需求

### 4.1 性能需求

1. 响应时间
   - 页面加载时间：普通页面≤2秒，数据密集页面≤5秒
   - 智能问答响应时间：简单问题≤3秒，复杂问题≤10秒
   - 计划生成时间：简单计划≤10秒，复杂计划≤60秒

2. 并发性能
   - 系统应支持至少100人同时在线操作
   - 高峰期系统性能降低不超过20%

3. 数据处理能力
   - 支持TB级维修知识库数据的存储与检索
   - 支持历史维修数据的高效分析处理

### 4.2 安全需求

1. 身份认证与授权
   - 支持多因素认证机制
   - 基于角色的权限管理，精确到功能和数据级别
   - 敏感操作审计跟踪

2. 数据安全
   - 重要数据加密存储
   - 敏感信息脱敏展示
   - 数据传输加密

3. 网络安全
   - 防止SQL注入、XSS等常见网络攻击
   - 定期安全扫描与漏洞修复

### 4.3 可靠性需求

1. 系统可用性：99.9%（年计划外停机时间不超过8.76小时）
2. 数据备份：每日增量备份，每周全量备份，备份数据保留30天
3. 容错性：关键功能模块具备容错能力，单点故障不影响系统整体可用性
4. 灾难恢复：RTO（恢复时间目标）≤4小时，RPO（恢复点目标）≤1小时

### 4.4 可维护性需求

1. 系统架构应遵循模块化设计，便于维护和升级
2. 提供完善的日志记录机制，支持多级别日志
3. 提供系统监控功能，及时发现异常情况
4. 支持热更新，减少维护对系统运行的影响

### 4.5 可扩展性需求

1. 系统架构应支持水平扩展，以应对用户量和数据量增长
2. 支持新功能模块的便捷集成
3. 支持与更多第三方系统的对接
4. AI能力支持模型升级和算法优化

### 4.6 其他需求

1. 易用性
   - 界面设计符合用户习惯，操作简单直观
   - 提供上下文相关帮助
   - 支持不同终端设备的自适应显示

2. 国际化
   - 支持中英文界面切换
   - 支持时区设置和日期格式定制

3. 合规性
   - 符合航空维修行业相关法规和标准
   - 满足数据保护和隐私相关法律要求

## 5. 接口需求

### 5.1 用户接口

1. Web界面
   - 支持主流浏览器：Chrome、Firefox、Edge等
   - 响应式设计，适配不同屏幕尺寸
   - 符合企业VI规范

2. 移动端界面
   - 支持AR眼镜和Android系统平板
   - 针对关键功能优化移动端操作体验

3. 辅助功能
   - 支持快捷键操作
   - 符合基本无障碍访问标准

### 5.2 硬件接口

1. 发动机检测设备接口
   - 支持常见的发动机检测设备数据采集
   - 提供标准化的设备接入协议

2. 移动终端接口
   - 支持平板和手持终端的数据同步
   - 提供离线操作和数据上传功能

3. 打印设备接口
   - 支持常见打印机型号
   - 支持报表和标签的规范化打印

### 5.3 软件接口

1. SAP系统接口
   - 维修指令接收和状态更新
   - 航材信息同步
   - 工时记录和成本核算

2. 文档管理系统接口
   - 维修手册和技术文档同步
   - EO/EB/SB等技术通告集成

3. 人力资源系统接口
   - 人员信息和资质同步
   - 工时统计和绩效数据交换

4. 工具管理系统接口
   - 工具库存和状态同步
   - 工具借还记录交换

### 5.4 通信接口

1. API接口
   - 提供RESTful API，支持JSON格式数据交换
   - 支持OAuth2.0等标准认证协议
   - 提供API版本控制和兼容性管理

2. 消息队列接口
   - 支持异步消息处理
   - 提供事件通知和订阅机制

3. 数据集成接口
   - 支持批量数据导入导出
   - 提供ETL工具接入能力

## 6. 数据需求

### 6.1 数据实体

1. 维修知识实体
   - 维修手册
   - 技术通告
   - 维修经验
   - 历史维修记录

2. 计划管理实体
   - 维修指令
   - 维修计划
   - 维修任务
   - 工作流程

3. 资源管理实体
   - 航材
   - 人员
   - 工具
   - 工位

4. 检测管理实体
   - 检测任务
   - 检测点
   - 检测结果
   - 检测报告

### 6.2 数据流

1. 维修知识数据流
   - 外部技术文档→知识库→智能问答
   - 历史维修记录→知识提炼→维修经验库

2. 计划管理数据流
   - SAP维修指令→智能计划生成→执行计划
   - 执行过程反馈→计划调整→更新执行计划

3. 资源管理数据流
   - 维修计划→资源需求分析→资源配置
   - 资源状态→资源调整→优化配置

4. 检测管理数据流
   - 检测需求→检测任务创建→检测执行
   - 检测数据→分析处理→检测报告

### 6.3 数据字典

| 数据项       | 数据类型 | 约束条件   | 描述                   |
| ------------ | -------- | ---------- | ---------------------- |
| 维修指令编号 | 字符串   | 唯一，非空 | SAP维修指令唯一标识    |
| 发动机序列号 | 字符串   | 唯一，非空 | 发动机唯一标识         |
| 维修类型     | 枚举     | 非空       | 如：定检、非例行维修等 |
| 航材编号     | 字符串   | 唯一，非空 | 航材件号               |
| 工卡号       | 字符串   | 非空       | 维修工卡标识           |
| 人员工号     | 字符串   | 唯一，非空 | 维修人员唯一标识       |
| 资质代码     | 字符串   | 非空       | 维修人员资质代码       |
| 工位编号     | 字符串   | 唯一，非空 | 维修工位唯一标识       |

## 7. 约束条件

1. 法律法规约束
   - 系统开发和运行必须遵守国家相关法律法规
   - 遵守航空维修行业相关标准和规范

2. 技术约束
   - 系统必须兼容现有IT基础设施
   - 必须与SAP等核心业务系统实现无缝集成
   - AI技术应用需考虑算力资源限制

3. 业务约束
   - 系统功能必须符合实际维修业务流程
   - 系统变更不得影响正常维修工作

4. 时间约束
   - 项目开发周期不超过12个月
   - 关键功能模块优先实现

5. 资源约束
   - 开发和运维团队规模有限
   - 硬件投入预算有限

## 8. 附录

### 8.1 用例图

待补充

### 8.2 业务流程图

待补充

### 8.3 其他附录

待补充
