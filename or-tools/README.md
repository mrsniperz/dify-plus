# æ™ºèƒ½æ’ç¨‹ç³»ç»Ÿ (Intelligent Scheduling System)

åŸºäºGoogle OR-Tools CP-SATæ±‚è§£å™¨çš„å‘åŠ¨æœºQECç»´ä¿®è®¡åˆ’æ™ºèƒ½è°ƒåº¦å¼•æ“ã€‚

## ğŸ¯ é¡¹ç›®ç›®æ ‡

é€šè¿‡AIæŠ€æœ¯æ™ºèƒ½åŒ–ç”Ÿæˆå’Œè°ƒæ•´å‘åŠ¨æœºQECï¼ˆQuick Engine Changeï¼‰ç»´ä¿®è®¡åˆ’ï¼Œæ ¸å¿ƒæ˜¯ä¼˜åŒ–èˆªæã€äººå‘˜ã€å·¥å…·ã€åœºåœ°ç­‰å…³é”®èµ„æºçš„é…ç½®æ•ˆç‡ã€‚

**æœ€ç»ˆç›®æ ‡**ï¼šå»ºç«‹ä¸€ä¸ªèƒ½å¤Ÿå“åº”å®æ—¶å˜åŒ–ã€æ»¡è¶³å¤æ‚ä¸šåŠ¡çº¦æŸã€å¹¶ä»¥"æ€»å·¥æ—¶æœ€çŸ­ã€æˆæœ¬æœ€ä½ã€èµ„æºåˆ©ç”¨ç‡æœ€é«˜"ä¸ºå¯¼å‘çš„æ™ºèƒ½è°ƒåº¦å¼•æ“ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
æ™ºèƒ½æ’ç¨‹ç³»ç»Ÿ
â”œâ”€â”€ æ•°æ®æ¨¡å‹å±‚ (models/)          # æ ¸å¿ƒä¸šåŠ¡å®ä½“å’Œæ•°æ®ç»“æ„
â”œâ”€â”€ æ±‚è§£å™¨å±‚ (solvers/)           # åŸºäºOR-Toolsçš„çº¦æŸæ±‚è§£å¼•æ“
â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘å±‚ (services/)        # æ’ç¨‹æœåŠ¡ã€èµ„æºç®¡ç†ã€äº‹ä»¶å¤„ç†
â”œâ”€â”€ APIæ¥å£å±‚ (api/)              # RESTful APIå’Œä¸­é—´ä»¶
â”œâ”€â”€ é…ç½®ç®¡ç†å±‚ (config/)          # ç­–ç•¥æ¨¡æ¿å’Œå‚æ•°é…ç½®
â””â”€â”€ å·¥å…·å±‚ (utils/)               # é€šç”¨å·¥å…·å‡½æ•°å’ŒåŠ©æ‰‹ç±»
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### å‡†å¤‡é˜¶æ®µæ™ºèƒ½æ’ç¨‹
- **é—¨ç¦ç®¡ç†**: å…³é”®å·¥è£…é½å¥—ã€èˆªæé½å¥—ã€æŠ€æœ¯èµ„æ–™å°±ç»ªç­‰é—¨ç¦æ£€æŸ¥
- **èµ„æºè°ƒé…**: è¡Œè½¦ã€å·¥ä½ã€äººå‘˜ç­‰èµ„æºçš„æ™ºèƒ½åˆ†é…å’Œå†²çªé¿å…
- **åŠ¨æ€é‡æ’**: åŸºäºETAå˜æ›´ã€SAPçŠ¶æ€æ›´æ–°ç­‰äº‹ä»¶çš„å®æ—¶è®¡åˆ’è°ƒæ•´

### å¤šé¡¹ç›®å¹¶è¡Œä¼˜åŒ–
- **å…¨å±€èµ„æºæ± **: è·¨é¡¹ç›®çš„èµ„æºå…±äº«å’Œä¼˜åŒ–åˆ†é…
- **ä¼˜å…ˆçº§ç­–ç•¥**: æ”¯æŒSLAä¿æŠ¤ã€å‡è¡¡å…¬å¹³ã€æˆæœ¬æœ€å°ç­‰ç­–ç•¥æ¨¡æ¿
- **æ’å•æœºåˆ¶**: ç´§æ€¥ä»»åŠ¡çš„æ’é˜Ÿå¤„ç†å’Œå½±å“è¯„ä¼°

### çº¦æŸæ±‚è§£å¼•æ“
- **ç¡¬çº¦æŸ**: å·¥ä½œæµç¨‹ä¾èµ–ã€èµ„æºç‹¬å ã€èµ„è´¨åŒ¹é…ã€ç‰©æ–™é½å…¨ç­‰
- **è½¯çº¦æŸ**: ä¼˜æ‰ä¼˜ç”¨ã€å‡å°‘ç­‰å¾…ã€å·¥ä½œè¿ç»­æ€§ç­‰ä¼˜åŒ–ç›®æ ‡
- **æ€§èƒ½ä¼˜åŒ–**: å•å·¥åŒ…â‰¤5ç§’ï¼Œå¤šå·¥åŒ…â‰¤20ç§’çš„æ±‚è§£æ€§èƒ½ç›®æ ‡

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ ¸å¿ƒæ±‚è§£å™¨**: Google OR-Tools CP-SAT Solver
- **å¼€å‘è¯­è¨€**: Python 3.9+
- **æ•°æ®éªŒè¯**: Pydantic 2.5+
- **APIæ¡†æ¶**: FastAPI 0.104+
- **æµ‹è¯•æ¡†æ¶**: pytest 7.4+
- **ä»£ç è´¨é‡**: black, isort, mypy, flake8

## ğŸ“¦ å®‰è£…å’Œä½¿ç”¨

### ç¯å¢ƒè¦æ±‚
- Python 3.9 æˆ–æ›´é«˜ç‰ˆæœ¬
- UVåŒ…ç®¡ç†å™¨ï¼ˆæ¨èï¼‰æˆ–pip

### å®‰è£…ä¾èµ–

ä½¿ç”¨UVï¼ˆæ¨èï¼‰ï¼š
```bash
# å®‰è£…ä¾èµ–
uv sync

# å®‰è£…å¼€å‘ä¾èµ–
uv sync --dev
```

ä½¿ç”¨pipï¼š
```bash
# å®‰è£…ä¾èµ–
pip install -e .

# å®‰è£…å¼€å‘ä¾èµ–
pip install -e ".[dev]"
```

### è¿è¡Œæµ‹è¯•

```bash
# ä½¿ç”¨UVè¿è¡Œæµ‹è¯•
uv run pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»å‹
uv run pytest -m unit          # å•å…ƒæµ‹è¯•
uv run pytest -m integration   # é›†æˆæµ‹è¯•
uv run pytest --cov=src        # è¦†ç›–ç‡æµ‹è¯•
```

### å¯åŠ¨APIæœåŠ¡

```bash
# æ–¹æ³•1: ä½¿ç”¨ä¸»å…¥å£å¯åŠ¨ï¼ˆæ¨èï¼‰
uv run python main.py

# æ–¹æ³•2: æŒ‡å®šä¸»æœºå’Œç«¯å£
uv run python main.py --host 0.0.0.0 --port 8000

# æ–¹æ³•3: å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡è½½ï¼‰
uv run python main.py --reload

# æ–¹æ³•4: é…ç½®æ£€æŸ¥
uv run python main.py --config-check

# æ–¹æ³•5: æ±‚è§£å™¨æµ‹è¯•
uv run python main.py --test-solver
```

## ğŸ“š APIæ–‡æ¡£å’Œæ¥å£ä½¿ç”¨

### å¿«é€Ÿè®¿é—®
å¯åŠ¨æœåŠ¡åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€ï¼š
- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **ç³»ç»Ÿä¿¡æ¯**: http://localhost:8000/info
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health
- **æ€§èƒ½æŒ‡æ ‡**: http://localhost:8000/metrics

### ğŸ§ª APIæµ‹è¯•å·¥å…·

é¡¹ç›®æä¾›äº†å®Œæ•´çš„APIæµ‹è¯•å·¥å…· `test_api.py`ï¼Œæ”¯æŒï¼š

```bash
# è¿è¡Œæ‰€æœ‰APIæµ‹è¯•
uv run python test_api.py

# æµ‹è¯•ç‰¹å®šæ¥å£
uv run python test_api.py --endpoint health
uv run python test_api.py --endpoint info
uv run python test_api.py --endpoint metrics

# ç”Ÿæˆæµ‹è¯•æ•°æ®
uv run python test_api.py --generate-data

# æŒ‡å®šAPIæœåŠ¡å™¨åœ°å€
uv run python test_api.py --base-url http://localhost:8000
```

### ğŸ“Š æµ‹è¯•æ•°æ®è¯´æ˜

`test_data.json` åŒ…å«å®Œæ•´çš„æ¨¡æ‹Ÿæ•°æ®é›†ï¼š

- **å·¥ä½œåŒ… (work_packages)**: 3ä¸ªä¸åŒä¼˜å…ˆçº§çš„æµ‹è¯•å·¥ä½œåŒ…
- **ä»»åŠ¡ (jobs)**: 11ä¸ªå…·æœ‰ä¾èµ–å…³ç³»çš„ä»»åŠ¡
- **èµ„æº (resources)**: 5ä¸ªæŠ€å¸ˆï¼ŒåŒ…å«ä¸åŒæŠ€èƒ½å’Œå·¥ä½œæ—¶é—´
- **æ’ç¨‹è¯·æ±‚ (schedule_request)**: å®Œæ•´çš„æ’ç¨‹è¯·æ±‚ç¤ºä¾‹

### ğŸ”Œ ä¸»è¦APIç«¯ç‚¹

#### ç³»ç»ŸåŸºç¡€æ¥å£
- `GET /` - ç³»ç»Ÿæ ¹ä¿¡æ¯
- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /info` - ç³»ç»Ÿè¯¦ç»†ä¿¡æ¯
- `GET /metrics` - æ€§èƒ½æŒ‡æ ‡
- `GET /docs` - APIæ–‡æ¡£

#### å‡†å¤‡é˜¶æ®µæ’ç¨‹ (å¼€å‘ä¸­)
- `POST /api/v1/prep/tasks/plan` - ç”Ÿæˆå‡†å¤‡æ’ç¨‹
- `POST /api/v1/prep/events/apply` - äº‹ä»¶é©±åŠ¨é‡æ’
- `GET /api/v1/prep/summary` - å‡†å¤‡æ€æ±‡æ€»
- `POST /api/v1/prep/handovers/confirm` - äº¤æ¥ç¡®è®¤

#### é…ç½®ç®¡ç† (å¼€å‘ä¸­)
- `POST /api/v1/config/priority-template:apply` - ç­–ç•¥æ¨¡æ¿åˆ‡æ¢
- `POST /api/v1/config/preemption:settings` - æ’å•æŠ¤æ è®¾ç½®

#### å®¡è®¡æŸ¥è¯¢ (å¼€å‘ä¸­)
- `GET /api/v1/audit/changes` - å˜æ›´æ—¥å¿—æŸ¥è¯¢

## ğŸ›ï¸ ç³»ç»Ÿæ¶æ„å’Œæ¨¡å—è¿ä½œé€»è¾‘

### æ ¸å¿ƒæ¨¡å—äº¤äº’æµç¨‹

```mermaid
graph TD
    A[APIæ¥å£å±‚] --> B[ä¸šåŠ¡é€»è¾‘å±‚]
    B --> C[æ±‚è§£å™¨å±‚]
    B --> D[æ•°æ®æ¨¡å‹å±‚]
    C --> E[OR-Toolså¼•æ“]
    D --> F[æ•°æ®éªŒè¯]
    B --> G[é…ç½®ç®¡ç†å±‚]
    A --> H[ä¸­é—´ä»¶å±‚]
    H --> I[CORS/æ—¥å¿—/æ€§èƒ½ç›‘æ§]
```

### ğŸ“¦ æ¨¡å—è¯¦ç»†è¯´æ˜

#### 1. APIæ¥å£å±‚ (`src/api/`)
- **main.py**: FastAPIåº”ç”¨ä¸»å…¥å£ï¼Œè·¯ç”±æ³¨å†Œå’Œåº”ç”¨é…ç½®
- **middleware.py**: ä¸­é—´ä»¶ç®¡ç†ï¼ŒåŒ…å«CORSã€æ—¥å¿—ã€æ€§èƒ½ç›‘æ§ã€é”™è¯¯å¤„ç†
- **prep_api.py**: å‡†å¤‡é˜¶æ®µç›¸å…³APIæ¥å£
- **config_api.py**: é…ç½®ç®¡ç†APIæ¥å£

**è¿ä½œé€»è¾‘**:
1. æ¥æ”¶HTTPè¯·æ±‚
2. é€šè¿‡ä¸­é—´ä»¶è¿›è¡Œé¢„å¤„ç†ï¼ˆCORSã€æ—¥å¿—ã€æ€§èƒ½ç›‘æ§ï¼‰
3. è·¯ç”±åˆ°å¯¹åº”çš„å¤„ç†å‡½æ•°
4. è°ƒç”¨ä¸šåŠ¡é€»è¾‘å±‚æœåŠ¡
5. è¿”å›æ ‡å‡†åŒ–å“åº”

#### 2. ä¸šåŠ¡é€»è¾‘å±‚ (`src/services/`)
- **æ’ç¨‹æœåŠ¡**: æ ¸å¿ƒæ’ç¨‹ç®—æ³•å’Œä¸šåŠ¡è§„åˆ™
- **èµ„æºç®¡ç†**: èµ„æºåˆ†é…å’Œå†²çªæ£€æµ‹
- **äº‹ä»¶å¤„ç†**: å¤–éƒ¨äº‹ä»¶çš„å¤„ç†å’Œå“åº”
- **é—¨ç¦ç®¡ç†**: å‡†å¤‡é˜¶æ®µé—¨ç¦æ¡ä»¶éªŒè¯

**è¿ä½œé€»è¾‘**:
1. æ¥æ”¶APIå±‚çš„ä¸šåŠ¡è¯·æ±‚
2. éªŒè¯ä¸šåŠ¡è§„åˆ™å’Œçº¦æŸæ¡ä»¶
3. è°ƒç”¨æ±‚è§£å™¨è¿›è¡Œä¼˜åŒ–è®¡ç®—
4. å¤„ç†æ±‚è§£ç»“æœå¹¶åº”ç”¨ä¸šåŠ¡é€»è¾‘
5. è¿”å›å¤„ç†ç»“æœç»™APIå±‚

#### 3. æ±‚è§£å™¨å±‚ (`src/solvers/`)
- **SolverFactory**: æ±‚è§£å™¨å·¥å‚ï¼Œæ”¯æŒå¤šç§æ±‚è§£å™¨ç±»å‹
- **CPSATSolver**: åŸºäºOR-Tools CP-SATçš„çº¦æŸæ±‚è§£å™¨
- **SolverConfig**: æ±‚è§£å™¨é…ç½®å’Œå‚æ•°ç®¡ç†

**è¿ä½œé€»è¾‘**:
1. æ¥æ”¶ä¸šåŠ¡å±‚çš„æ±‚è§£è¯·æ±‚
2. å°†ä¸šåŠ¡é—®é¢˜è½¬æ¢ä¸ºçº¦æŸæ»¡è¶³é—®é¢˜
3. è°ƒç”¨OR-Toolså¼•æ“è¿›è¡Œæ±‚è§£
4. è§£ææ±‚è§£ç»“æœ
5. è¿”å›ä¼˜åŒ–æ–¹æ¡ˆç»™ä¸šåŠ¡å±‚

#### 4. æ•°æ®æ¨¡å‹å±‚ (`src/models/`)
- **Job**: ä»»åŠ¡æ¨¡å‹ï¼ŒåŒ…å«å·¥ä½œå†…å®¹å’Œä¾èµ–å…³ç³»
- **Resource**: èµ„æºæ¨¡å‹ï¼ŒåŒ…å«äººå‘˜ã€è®¾å¤‡ã€å·¥å…·ç­‰
- **WorkPackage**: å·¥ä½œåŒ…æ¨¡å‹ï¼Œä»»åŠ¡çš„é›†åˆ
- **Schedule**: æ’ç¨‹ç»“æœæ¨¡å‹

**è¿ä½œé€»è¾‘**:
1. å®šä¹‰æ ¸å¿ƒä¸šåŠ¡å®ä½“
2. æä¾›æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
3. ç®¡ç†å®ä½“é—´çš„å…³ç³»å’Œçº¦æŸ
4. æ”¯æŒæ•°æ®æŒä¹…åŒ–å’ŒæŸ¥è¯¢

#### 5. é…ç½®ç®¡ç†å±‚ (`src/config/`)
- **settings.py**: åº”ç”¨é…ç½®ç®¡ç†ï¼Œæ”¯æŒç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶
- **ç­–ç•¥æ¨¡æ¿**: ä¸åŒçš„ä¼˜åŒ–ç­–ç•¥é…ç½®
- **ä¸šåŠ¡å‚æ•°**: å¯è°ƒæ•´çš„ä¸šåŠ¡è§„åˆ™å‚æ•°

**è¿ä½œé€»è¾‘**:
1. åŠ è½½å’ŒéªŒè¯é…ç½®å‚æ•°
2. æä¾›é…ç½®çƒ­æ›´æ–°æœºåˆ¶
3. ç®¡ç†ä¸åŒç¯å¢ƒçš„é…ç½®å·®å¼‚
4. æ”¯æŒç­–ç•¥æ¨¡æ¿çš„åŠ¨æ€åˆ‡æ¢

### ğŸ”„ å…¸å‹ä¸šåŠ¡æµç¨‹

#### æ’ç¨‹è¯·æ±‚å¤„ç†æµç¨‹
1. **APIæ¥æ”¶**: å‰ç«¯å‘é€æ’ç¨‹è¯·æ±‚åˆ° `/api/v1/prep/tasks/plan`
2. **æ•°æ®éªŒè¯**: ä¸­é—´ä»¶å’Œæ¨¡å‹å±‚éªŒè¯è¯·æ±‚æ•°æ®æ ¼å¼å’Œä¸šåŠ¡è§„åˆ™
3. **ä¸šåŠ¡å¤„ç†**: æœåŠ¡å±‚è§£æä»»åŠ¡ä¾èµ–ã€èµ„æºéœ€æ±‚å’Œçº¦æŸæ¡ä»¶
4. **æ±‚è§£ä¼˜åŒ–**: æ±‚è§£å™¨å±‚å°†é—®é¢˜è½¬æ¢ä¸ºCSPå¹¶è°ƒç”¨OR-Toolsæ±‚è§£
5. **ç»“æœå¤„ç†**: ä¸šåŠ¡å±‚å¤„ç†æ±‚è§£ç»“æœï¼Œåº”ç”¨ä¸šåŠ¡è§„åˆ™å’Œåå¤„ç†
6. **å“åº”è¿”å›**: APIå±‚è¿”å›æ ‡å‡†åŒ–çš„æ’ç¨‹ç»“æœ

#### äº‹ä»¶é©±åŠ¨é‡æ’æµç¨‹
1. **äº‹ä»¶æ¥æ”¶**: å¤–éƒ¨ç³»ç»Ÿæ¨é€çŠ¶æ€å˜æ›´äº‹ä»¶
2. **äº‹ä»¶éªŒè¯**: éªŒè¯äº‹ä»¶æ ¼å¼å’Œä¸šåŠ¡æœ‰æ•ˆæ€§
3. **å½±å“åˆ†æ**: åˆ†æäº‹ä»¶å¯¹å½“å‰æ’ç¨‹çš„å½±å“èŒƒå›´
4. **é‡æ’å†³ç­–**: æ ¹æ®å½±å“ç¨‹åº¦å†³å®šæ˜¯å¦è§¦å‘é‡æ’
5. **å¢é‡æ±‚è§£**: ä½¿ç”¨å¢é‡æ±‚è§£ç®—æ³•ä¼˜åŒ–å—å½±å“çš„éƒ¨åˆ†
6. **ç»“æœåº”ç”¨**: æ›´æ–°æ’ç¨‹è®¡åˆ’å¹¶é€šçŸ¥ç›¸å…³ç³»ç»Ÿ

## ğŸ§ª å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ
é¡¹ç›®éµå¾ªä»¥ä¸‹ç¼–ç è§„èŒƒï¼š
- PEP 8 Pythonä»£ç é£æ ¼
- ç±»å‹æ³¨è§£ï¼šæ‰€æœ‰å…¬å…±å‡½æ•°å¿…é¡»åŒ…å«ç±»å‹æ³¨è§£
- æ–‡æ¡£å­—ç¬¦ä¸²ï¼šæ‰€æœ‰å…¬å…±ç±»å’Œå‡½æ•°å¿…é¡»åŒ…å«è¯¦ç»†çš„docstring
- æµ‹è¯•è¦†ç›–ï¼šæ ¸å¿ƒé€»è¾‘æµ‹è¯•è¦†ç›–ç‡ > 90%

### ä»£ç è´¨é‡æ£€æŸ¥
```bash
# ä»£ç æ ¼å¼åŒ–
uv run black src tests
uv run isort src tests

# ç±»å‹æ£€æŸ¥
uv run mypy src

# ä»£ç é£æ ¼æ£€æŸ¥
uv run flake8 src tests
```

### é¡¹ç›®ç»“æ„
```
or-tools/
â”œâ”€â”€ src/                      # æºä»£ç 
â”‚   â”œâ”€â”€ api/                  # APIæ¥å£å±‚
â”‚   â”‚   â”œâ”€â”€ main.py          # FastAPIåº”ç”¨ä¸»å…¥å£
â”‚   â”‚   â”œâ”€â”€ middleware.py    # ä¸­é—´ä»¶ï¼ˆCORSã€æ—¥å¿—ã€æ€§èƒ½ç›‘æ§ï¼‰
â”‚   â”‚   â”œâ”€â”€ prep_api.py      # å‡†å¤‡é˜¶æ®µAPI
â”‚   â”‚   â””â”€â”€ config_api.py    # é…ç½®ç®¡ç†API
â”‚   â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹å±‚
â”‚   â”‚   â”œâ”€â”€ job.py           # ä»»åŠ¡æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ resource.py      # èµ„æºæ¨¡å‹
â”‚   â”‚   â””â”€â”€ schedule.py      # æ’ç¨‹æ¨¡å‹
â”‚   â”œâ”€â”€ services/             # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ scheduling.py    # æ’ç¨‹æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ resource_mgmt.py # èµ„æºç®¡ç†
â”‚   â”‚   â””â”€â”€ event_handler.py # äº‹ä»¶å¤„ç†
â”‚   â”œâ”€â”€ solvers/              # æ±‚è§£å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ factory.py       # æ±‚è§£å™¨å·¥å‚
â”‚   â”‚   â”œâ”€â”€ cpsat_solver.py  # CP-SATæ±‚è§£å™¨
â”‚   â”‚   â””â”€â”€ config.py        # æ±‚è§£å™¨é…ç½®
â”‚   â”œâ”€â”€ schemas/              # æ•°æ®ç»“æ„å®šä¹‰
â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ constants.py     # ç³»ç»Ÿå¸¸é‡
â”‚   â”‚   â””â”€â”€ exceptions.py    # å¼‚å¸¸å®šä¹‰
â”‚   â”œâ”€â”€ config/               # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ settings.py      # åº”ç”¨è®¾ç½®
â”‚   â””â”€â”€ utils/                # å·¥å…·å‡½æ•°åº“
â”œâ”€â”€ tests/                    # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ unit/                 # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/          # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ fixtures/             # æµ‹è¯•æ•°æ®
â”‚   â””â”€â”€ mocks/                # æ¨¡æ‹Ÿå¯¹è±¡
â”œâ”€â”€ docs/                     # éœ€æ±‚å’Œè®¾è®¡æ–‡æ¡£
â”œâ”€â”€ scripts/                  # å¯æ‰§è¡Œè„šæœ¬
â”œâ”€â”€ test_api.py              # APIæµ‹è¯•å·¥å…·
â”œâ”€â”€ test_data.json           # æµ‹è¯•æ•°æ®é›†
â”œâ”€â”€ main.py                  # åº”ç”¨ä¸»å…¥å£
â””â”€â”€ .cursor/docs/             # é¡¹ç›®æ–‡æ¡£
```

### ğŸ”§ æ•…éšœæ’é™¤

#### å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

**1. APIæœåŠ¡å™¨å¯åŠ¨å¤±è´¥**
```bash
# æ£€æŸ¥é…ç½®
uv run python main.py --config-check

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8000

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
uv run python main.py --debug
```

**2. ä¾èµ–å®‰è£…é—®é¢˜**
```bash
# é‡æ–°å®‰è£…ä¾èµ–
uv sync --reinstall

# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version  # éœ€è¦ >= 3.9

# å®‰è£…ç¼ºå¤±çš„åŒ…
uv add pydantic-settings requests
```

**3. CORSè·¨åŸŸé—®é¢˜**
- æ£€æŸ¥å‰ç«¯è®¿é—®åœ°å€æ˜¯å¦åœ¨CORSå…è®¸åˆ—è¡¨ä¸­
- é»˜è®¤å…è®¸: `localhost:3000`, `localhost:8080`
- ä¿®æ”¹é…ç½®: `src/config/settings.py` ä¸­çš„ `cors_origins`

**4. APIæµ‹è¯•å¤±è´¥**
```bash
# ç¡®ä¿æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
curl http://localhost:8000/health

# è¿è¡Œå•ä¸ªæµ‹è¯•
uv run python test_api.py --endpoint health

# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping localhost
```

### ğŸ“Š æ€§èƒ½ç›‘æ§

ç³»ç»Ÿæä¾›äº†å†…ç½®çš„æ€§èƒ½ç›‘æ§åŠŸèƒ½ï¼š

```bash
# æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡
curl http://localhost:8000/metrics

# å“åº”ç¤ºä¾‹
{
  "metrics": {
    "total_requests": 42,
    "slow_requests": 2,
    "error_requests": 1,
    "average_response_time": 0.156
  },
  "timestamp": "2025-08-15T18:07:18.008540"
}
```

**æ€§èƒ½æŒ‡æ ‡è¯´æ˜**:
- `total_requests`: æ€»è¯·æ±‚æ•°
- `slow_requests`: æ…¢è¯·æ±‚æ•°ï¼ˆ>5ç§’ï¼‰
- `error_requests`: é”™è¯¯è¯·æ±‚æ•°
- `average_response_time`: å¹³å‡å“åº”æ—¶é—´ï¼ˆç§’ï¼‰

### ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

#### 1. åŸºç¡€APIè°ƒç”¨ç¤ºä¾‹

```python
import requests

# å¥åº·æ£€æŸ¥
response = requests.get("http://localhost:8000/health")
print(response.json())

# è·å–ç³»ç»Ÿä¿¡æ¯
response = requests.get("http://localhost:8000/info")
system_info = response.json()
print(f"ç³»ç»Ÿåç§°: {system_info['system']['name']}")
print(f"åŠŸèƒ½ç‰¹æ€§: {len(system_info['features'])}ä¸ª")
```

#### 2. ä½¿ç”¨æµ‹è¯•æ•°æ®è¿›è¡Œå¼€å‘

```python
import json

# åŠ è½½æµ‹è¯•æ•°æ®
with open('test_data.json', 'r', encoding='utf-8') as f:
    test_data = json.load(f)

# è·å–å·¥ä½œåŒ…ä¿¡æ¯
work_packages = test_data['work_packages']
print(f"æµ‹è¯•å·¥ä½œåŒ…æ•°é‡: {len(work_packages)}")

# è·å–ä»»åŠ¡ä¿¡æ¯
jobs = test_data['jobs']
for job in jobs:
    print(f"ä»»åŠ¡: {job['name']}, å·¥æœŸ: {job['base_duration_hours']:.1f}å°æ—¶")
```

#### 3. å‰ç«¯é›†æˆç¤ºä¾‹

```javascript
// JavaScript/TypeScript å‰ç«¯è°ƒç”¨ç¤ºä¾‹
const API_BASE_URL = 'http://localhost:8000';

// è·å–ç³»ç»Ÿå¥åº·çŠ¶æ€
async function checkHealth() {
    try {
        const response = await fetch(`${API_BASE_URL}/health`);
        const data = await response.json();
        console.log('ç³»ç»ŸçŠ¶æ€:', data.status);
        return data;
    } catch (error) {
        console.error('å¥åº·æ£€æŸ¥å¤±è´¥:', error);
    }
}

// è·å–ç³»ç»Ÿä¿¡æ¯
async function getSystemInfo() {
    try {
        const response = await fetch(`${API_BASE_URL}/info`);
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('è·å–ç³»ç»Ÿä¿¡æ¯å¤±è´¥:', error);
    }
}
```

### ğŸ¯ æœ€ä½³å®è·µ

#### å¼€å‘ç¯å¢ƒé…ç½®
1. **ä½¿ç”¨UVåŒ…ç®¡ç†å™¨**: æ›´å¿«çš„ä¾èµ–è§£æå’Œå®‰è£…
2. **å¯ç”¨è‡ªåŠ¨é‡è½½**: å¼€å‘æ—¶ä½¿ç”¨ `--reload` å‚æ•°
3. **é…ç½®IDE**: è®¾ç½®Pythonè§£é‡Šå™¨ä¸ºé¡¹ç›®è™šæ‹Ÿç¯å¢ƒ
4. **ä»£ç æ ¼å¼åŒ–**: é…ç½®IDEè‡ªåŠ¨è¿è¡Œblackå’Œisort

#### APIä½¿ç”¨å»ºè®®
1. **é”™è¯¯å¤„ç†**: å§‹ç»ˆæ£€æŸ¥HTTPçŠ¶æ€ç å’Œå“åº”æ ¼å¼
2. **è¶…æ—¶è®¾ç½®**: ä¸ºAPIè°ƒç”¨è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
3. **é‡è¯•æœºåˆ¶**: å¯¹äºç½‘ç»œé”™è¯¯å®ç°æŒ‡æ•°é€€é¿é‡è¯•
4. **æ—¥å¿—è®°å½•**: è®°å½•APIè°ƒç”¨çš„å…³é”®ä¿¡æ¯ç”¨äºè°ƒè¯•

#### æ€§èƒ½ä¼˜åŒ–
1. **å¹¶å‘æ§åˆ¶**: é¿å…åŒæ—¶å‘èµ·è¿‡å¤šAPIè¯·æ±‚
2. **ç¼“å­˜ç­–ç•¥**: å¯¹ä¸ç»å¸¸å˜åŒ–çš„æ•°æ®è¿›è¡Œç¼“å­˜
3. **åˆ†é¡µæŸ¥è¯¢**: å¯¹å¤§é‡æ•°æ®ä½¿ç”¨åˆ†é¡µæœºåˆ¶
4. **ç›‘æ§æŒ‡æ ‡**: å®šæœŸæ£€æŸ¥ `/metrics` ç«¯ç‚¹çš„æ€§èƒ½æ•°æ®

#### æµ‹è¯•ç­–ç•¥
1. **å•å…ƒæµ‹è¯•**: è¦†ç›–æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
2. **é›†æˆæµ‹è¯•**: æµ‹è¯•APIç«¯åˆ°ç«¯åŠŸèƒ½
3. **æ€§èƒ½æµ‹è¯•**: éªŒè¯æ±‚è§£å™¨æ€§èƒ½ç›®æ ‡
4. **å›å½’æµ‹è¯•**: ç¡®ä¿æ–°åŠŸèƒ½ä¸ç ´åç°æœ‰åŠŸèƒ½

## ğŸ“– æ–‡æ¡£

- [éœ€æ±‚æ–‡æ¡£](docs/requirements.md) - ä¸šåŠ¡éœ€æ±‚å’ŒåŠŸèƒ½è§„æ ¼
- [å¼€å‘è®¾è®¡æ–‡æ¡£](docs/development_plan.md) - æŠ€æœ¯è®¾è®¡å’Œå®æ–½è·¯å¾„
- [APIå¥‘çº¦](docs/api_contract.md) - APIæ¥å£è§„èŒƒ
- [æµ‹è¯•åœºæ™¯](docs/test_scenarios.md) - æµ‹è¯•ç”¨ä¾‹å’ŒéªŒæ”¶æ ‡å‡†

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ç»´æŠ¤è€…: Development Team
- é‚®ç®±: dev@company.com
- é¡¹ç›®é“¾æ¥: https://github.com/company/intelligent-scheduling

## ğŸ™ è‡´è°¢

- [Google OR-Tools](https://developers.google.com/optimization) - å¼ºå¤§çš„ä¼˜åŒ–å·¥å…·åº“
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ–çš„Python Webæ¡†æ¶
- [Pydantic](https://pydantic-docs.helpmanual.io/) - æ•°æ®éªŒè¯å’Œè®¾ç½®ç®¡ç†
